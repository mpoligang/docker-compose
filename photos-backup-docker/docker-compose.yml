version: "3.9"
services:
  # --- JELLYFIN ---
  jellyfin:
    image: jellyfin/jellyfin
    container_name: jellyfin
    restart: unless-stopped
    ports:
      - "8096:8096" # Porta per accesso locale
    volumes:
      - ./jellyfin/config:/config
      - ./jellyfin/cache:/cache
      - /mnt/storage/photos:/media/photos
    networks:
      - media-network

  # --- SYNCTHING ---
  syncthing:
    image: lscr.io/linuxserver/syncthing
    container_name: syncthing
    restart: unless-stopped
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Europe/Rome
    ports:
      - "8384:8384" # Porta per accesso locale
    volumes:
      - ./syncthing/config:/config
      - /mnt/storage/photos:/data/photos
    networks:
      - media-network

  # --- PLAYIT.GG ---
  playit:
    image: playit/playit:latest
    container_name: playit
    restart: unless-stopped
    volumes:
      # IMPORTANTE: Salva la configurazione qui cos√¨ il dominio resta FISSO
      - ./playit_data:/config
      - /dev/shm:/dev/shm
    networks:
      - media-network

networks:
  media-network:
    driver: bridge